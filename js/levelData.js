var LevelData = LevelData || {};

LevelData.getplatformData = function () {
    return [{x:36, y:429}, {x:42, y:425}, {x:42, y:426}, {x:42, y:427}, {x:43, y:424}, {x:43, y:425}, {x:43, y:426}, {x:43, y:427}, {x:44, y:423}, {x:44, y:424}, {x:44, y:425}, {x:45, y:423}, {x:45, y:424}, {x:45, y:425}, {x:55, y:414}, {x:55, y:415}, {x:56, y:413}, {x:56, y:414}, {x:56, y:415}, {x:56, y:416}, {x:57, y:413}, {x:57, y:414}, {x:57, y:415}, {x:57, y:416}, {x:58, y:412}, {x:58, y:413}, {x:58, y:414}, {x:59, y:412}, {x:59, y:413}, {x:59, y:414}, {x:60, y:410}, {x:60, y:411}, {x:60, y:412}, {x:60, y:413}, {x:61, y:410}, {x:61, y:411}, {x:61, y:412}, {x:61, y:413}, {x:66, y:407}, {x:66, y:408}, {x:67, y:405}, {x:67, y:406}, {x:67, y:407}, {x:67, y:408}, {x:68, y:405}, {x:68, y:406}, {x:73, y:400}, {x:73, y:401}, {x:73, y:402}, {x:74, y:400}, {x:74, y:401}, {x:74, y:402}, {x:83, y:394}, {x:83, y:395}, {x:84, y:394}, {x:84, y:395}, {x:91, y:390}, {x:93, y:391}, {x:93, y:392}, {x:94, y:391}, {x:94, y:392}, {x:97, y:389}, {x:97, y:390}, {x:97, y:391}, {x:98, y:389}, {x:98, y:390}, {x:98, y:391}, {x:99, y:390}, {x:99, y:391}, {x:100, y:389}, {x:100, y:390}, {x:100, y:391}, {x:101, y:389}, {x:101, y:390}, {x:107, y:387}, {x:107, y:388}, {x:108, y:387}, {x:108, y:388}, {x:109, y:387}, {x:109, y:388}, {x:110, y:386}, {x:110, y:387}, {x:111, y:386}, {x:111, y:387}, {x:112, y:386}, {x:112, y:387}, {x:113, y:386}, {x:113, y:387}, {x:114, y:386}, {x:114, y:387}, {x:122, y:385}, {x:122, y:386}, {x:123, y:385}, {x:123, y:386}, {x:124, y:385}, {x:124, y:386}, {x:125, y:385}, {x:125, y:386}, {x:125, y:387}, {x:126, y:386}, {x:126, y:387}, {x:127, y:386}, {x:127, y:387}, {x:128, y:386}, {x:128, y:387}, {x:129, y:386}, {x:129, y:387}, {x:130, y:386}, {x:130, y:387}, {x:131, y:388}, {x:131, y:389}, {x:132, y:388}, {x:132, y:389}, {x:133, y:388}, {x:133, y:389}, {x:134, y:388}, {x:134, y:389}, {x:136, y:389}, {x:136, y:390}, {x:136, y:391}, {x:137, y:389}, {x:137, y:390}, {x:137, y:391}, {x:138, y:390}, {x:138, y:391}, {x:138, y:392}, {x:139, y:390}, {x:139, y:391}, {x:139, y:392}, {x:139, y:393}, {x:140, y:391}, {x:140, y:392}, {x:140, y:393}, {x:141, y:393}, {x:141, y:394}, {x:141, y:395}, {x:142, y:393}, {x:142, y:394}, {x:142, y:395}, {x:143, y:394}, {x:143, y:395}, {x:151, y:401}, {x:151, y:402}, {x:152, y:401}, {x:152, y:402}, {x:158, y:403}, {x:158, y:404}, {x:159, y:403}, {x:159, y:404}, {x:160, y:403}, {x:160, y:404}, {x:160, y:405}, {x:161, y:404}, {x:161, y:405}, {x:163, y:404}, {x:163, y:405}, {x:164, y:404}, {x:164, y:405}, {x:182, y:418}, {x:182, y:419}, {x:183, y:418}, {x:183, y:419}, {x:184, y:419}, {x:184, y:420}, {x:185, y:419}, {x:185, y:420}, {x:185, y:421}, {x:185, y:422}, {x:186, y:421}, {x:186, y:422}, {x:186, y:423}, {x:187, y:422}, {x:187, y:423}, {x:200, y:434}, {x:200, y:435}, {x:201, y:434}, {x:201, y:435}, {x:203, y:436}, {x:203, y:437}, {x:204, y:436}, {x:204, y:437}, {x:204, y:438}, {x:205, y:436}, {x:205, y:437}, {x:205, y:438}, {x:206, y:437}, {x:206, y:438}, {x:206, y:439}, {x:207, y:437}, {x:207, y:438}, {x:207, y:439}, {x:208, y:438}, {x:208, y:439}, {x:208, y:440}, {x:209, y:439}, {x:209, y:440}, {x:210, y:439}, {x:210, y:440}, {x:214, y:439}, {x:214, y:440}, {x:214, y:441}, {x:215, y:439}, {x:215, y:440}, {x:215, y:441}, {x:216, y:440}, {x:216, y:441}, {x:217, y:440}, {x:217, y:441}, {x:218, y:440}, {x:218, y:441}, {x:219, y:440}, {x:219, y:441}, {x:220, y:440}, {x:220, y:441}, {x:221, y:440}, {x:221, y:441}, {x:223, y:440}, {x:223, y:441}, {x:224, y:440}, {x:224, y:441}, {x:231, y:441}, {x:231, y:442}, {x:232, y:441}, {x:232, y:442}, {x:233, y:441}, {x:233, y:442}, {x:234, y:441}, {x:234, y:442}, {x:235, y:441}, {x:235, y:442}, {x:248, y:438}, {x:248, y:439}, {x:249, y:438}, {x:249, y:439}, {x:250, y:438}, {x:250, y:439}, {x:250, y:440}, {x:251, y:438}, {x:251, y:439}, {x:251, y:440}, {x:252, y:439}, {x:252, y:440}, {x:253, y:439}, {x:253, y:440}, {x:253, y:441}, {x:254, y:439}, {x:254, y:440}, {x:254, y:441}, {x:255, y:440}, {x:255, y:441}, {x:256, y:440}, {x:256, y:441}, {x:257, y:440}, {x:257, y:441}, {x:259, y:439}, {x:259, y:440}, {x:260, y:439}, {x:260, y:440}, {x:261, y:439}, {x:261, y:440}, {x:262, y:439}, {x:262, y:440}, {x:263, y:438}, {x:263, y:439}, {x:263, y:440}, {x:264, y:438}, {x:264, y:439}, {x:264, y:440}, {x:265, y:437}, {x:265, y:438}, {x:266, y:437}, {x:266, y:438}, {x:272, y:437}, {x:272, y:438}, {x:273, y:437}, {x:273, y:438}, {x:274, y:437}, {x:274, y:438}, {x:275, y:438}, {x:275, y:439}, {x:276, y:438}, {x:276, y:439}, {x:277, y:438}, {x:277, y:439}, {x:278, y:438}, {x:278, y:439}, {x:279, y:438}, {x:279, y:439}, {x:280, y:438}, {x:280, y:439}, {x:281, y:438}, {x:281, y:439}, {x:282, y:438}, {x:282, y:439}, {x:283, y:438}, {x:283, y:439}, {x:285, y:436}, {x:285, y:437}, {x:286, y:436}, {x:286, y:437}, {x:287, y:435}, {x:287, y:436}, {x:287, y:437}, {x:288, y:435}, {x:288, y:436}, {x:288, y:437}, {x:289, y:435}, {x:289, y:436}, {x:289, y:437}, {x:290, y:435}, {x:290, y:436}, {x:291, y:435}, {x:291, y:436}, {x:293, y:436}, {x:293, y:437}, {x:294, y:436}, {x:294, y:437}, {x:294, y:438}, {x:295, y:437}, {x:295, y:438}, {x:296, y:437}, {x:296, y:438}, {x:297, y:437}, {x:297, y:438}, {x:298, y:437}, {x:298, y:438}, {x:299, y:437}, {x:299, y:438}, {x:299, y:439}, {x:300, y:437}, {x:300, y:438}, {x:300, y:439}, {x:301, y:438}, {x:301, y:439}, {x:302, y:438}, {x:302, y:439}, {x:308, y:439}, {x:308, y:440}, {x:309, y:438}, {x:309, y:439}, {x:309, y:440}, {x:310, y:438}, {x:310, y:439}, {x:311, y:438}, {x:311, y:439}, {x:312, y:438}, {x:312, y:439}, {x:313, y:438}, {x:313, y:439}, {x:316, y:437}, {x:316, y:438}, {x:317, y:437}, {x:317, y:438}, {x:318, y:438}, {x:318, y:439}, {x:319, y:438}, {x:319, y:439}, {x:320, y:437}, {x:322, y:438}, {x:322, y:439}, {x:323, y:438}, {x:323, y:439}, {x:331, y:439}, {x:331, y:440}, {x:332, y:439}, {x:332, y:440}, {x:334, y:440}, {x:334, y:441}, {x:335, y:440}, {x:335, y:441}, {x:336, y:439}, {x:336, y:440}, {x:336, y:441}, {x:337, y:439}, {x:337, y:440}, {x:338, y:439}, {x:338, y:440}, {x:339, y:438}, {x:339, y:439}, {x:340, y:438}, {x:340, y:439}, {x:348, y:434}, {x:348, y:435}, {x:349, y:434}, {x:349, y:435}, {x:350, y:433}, {x:350, y:434}, {x:351, y:433}, {x:351, y:434}, {x:354, y:432}, {x:354, y:433}, {x:355, y:431}, {x:355, y:432}, {x:355, y:433}, {x:356, y:431}, {x:356, y:432}, {x:357, y:431}, {x:357, y:432}, {x:363, y:428}, {x:363, y:429}, {x:364, y:428}, {x:364, y:429}, {x:365, y:427}, {x:365, y:428}, {x:366, y:427}, {x:366, y:428}, {x:374, y:423}, {x:374, y:424}, {x:375, y:423}, {x:375, y:424}, {x:377, y:423}, {x:377, y:424}, {x:378, y:423}, {x:378, y:424}, {x:378, y:425}, {x:379, y:424}, {x:379, y:425}, {x:380, y:424}, {x:380, y:425}, {x:382, y:424}, {x:382, y:425}, {x:383, y:424}, {x:383, y:425}, {x:394, y:426}, {x:394, y:427}, {x:395, y:426}, {x:395, y:427}, {x:398, y:427}, {x:398, y:428}, {x:399, y:427}, {x:399, y:428}, {x:399, y:429}, {x:400, y:428}, {x:400, y:429}, {x:401, y:428}, {x:401, y:429}, {x:408, y:430}, {x:408, y:431}, {x:409, y:430}, {x:409, y:431}, {x:410, y:431}, {x:410, y:432}, {x:411, y:431}, {x:411, y:432}, {x:426, y:438}, {x:426, y:439}, {x:427, y:438}, {x:427, y:439}, {x:427, y:440}, {x:428, y:439}, {x:428, y:440}, {x:429, y:439}, {x:429, y:440}, {x:435, y:442}, {x:435, y:443}, {x:435, y:444}, {x:436, y:442}, {x:436, y:443}, {x:436, y:444}, {x:437, y:443}, {x:437, y:444}, {x:444, y:448}, {x:444, y:449}, {x:445, y:448}, {x:445, y:449}, {x:447, y:452}, {x:447, y:453}, {x:447, y:454}, {x:448, y:452}, {x:448, y:453}, {x:448, y:454}, {x:448, y:455}, {x:448, y:456}, {x:449, y:455}, {x:449, y:456}, {x:450, y:457}, {x:450, y:458}, {x:451, y:457}, {x:451, y:458}, {x:452, y:459}, {x:452, y:460}, {x:452, y:461}, {x:453, y:459}, {x:453, y:460}, {x:453, y:461}, {x:458, y:469}, {x:459, y:469}, {x:459, y:470}, {x:460, y:469}, {x:460, y:470}, {x:462, y:474}, {x:462, y:475}, {x:463, y:474}, {x:463, y:475}, {x:467, y:481}, {x:467, y:482}, {x:468, y:481}, {x:468, y:482}, {x:468, y:483}, {x:469, y:481}, {x:469, y:482}, {x:469, y:483}, {x:469, y:484}, {x:469, y:485}, {x:470, y:483}, {x:470, y:484}, {x:470, y:485}, {x:473, y:487}, {x:473, y:488}, {x:474, y:487}, {x:474, y:488}, {x:474, y:489}, {x:474, y:490}, {x:475, y:489}, {x:475, y:490}, {x:475, y:491}, {x:475, y:492}, {x:476, y:490}, {x:476, y:491}, {x:476, y:492}, {x:476, y:493}, {x:477, y:491}, {x:477, y:492}, {x:477, y:493}, {x:477, y:494}, {x:478, y:492}, {x:478, y:493}, {x:478, y:494}, {x:479, y:493}, {x:479, y:494}, {x:480, y:495}, {x:480, y:496}, {x:481, y:495}, {x:481, y:496}, {x:487, y:498}, {x:487, y:499}, {x:488, y:498}, {x:488, y:499}, {x:489, y:498}, {x:489, y:499}, {x:493, y:497}, {x:493, y:498}, {x:493, y:499}, {x:494, y:498}, {x:494, y:499}, {x:495, y:498}, {x:495, y:499}, {x:496, y:498}, {x:496, y:499}, {x:497, y:498}, {x:497, y:499}, {x:498, y:498}, {x:498, y:499}, {x:499, y:498}, {x:499, y:499}, {x:500, y:498}, {x:500, y:499}, {x:505, y:498}, {x:505, y:499}, {x:506, y:498}, {x:506, y:499}, {x:511, y:499}, {x:511, y:500}, {x:512, y:499}, {x:512, y:500}, {x:517, y:500}, {x:517, y:501}, {x:518, y:500}, {x:518, y:501}, {x:521, y:500}, {x:521, y:501}, {x:522, y:500}, {x:522, y:501}, {x:523, y:500}, {x:535, y:499}, {x:535, y:500}, {x:536, y:499}, {x:536, y:500}, {x:545, y:498}, {x:545, y:499}, {x:546, y:498}, {x:546, y:499}, {x:547, y:498}, {x:547, y:499}, {x:548, y:498}, {x:548, y:499}, {x:572, y:497}];

}

LevelData.createWalkablePath = function (width, height, lines) {
    var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    var moveToSeg = path.createSVGPathSegMovetoAbs(0, height - 1);
    path.pathSegList.appendItem(moveToSeg);
    for (var i = 0; i < lines.length; i++) {
        path.pathSegList.appendItem(path.createSVGPathSegLinetoAbs(lines[i].x, lines[i].y))
    }
    // var lineToSeg1 = path.createSVGPathSegLinetoAbs(930, 400);
    // var lineToSeg2 = path.createSVGPathSegLinetoAbs(930, 300);

    // var endPoint = path.createSVGPathSegMovetoAbs(width, height);
    // var pathClose = path.createSVGPathSegClosePath();
    //path.pathSegList.appendItem(moveToSeg);
    // path.pathSegList.appendItem(lineToSeg1);
    path.pathSegList.appendItem(path.createSVGPathSegMovetoAbs(width - 1, height - 1));
    path.pathSegList.appendItem(path.createSVGPathSegClosePath());
    // var path = `
    //     <svg width="930" height="600" xmlns="http://www.w3.org/2000/svg">
    // <path d="M 0 300 L 930 400 L 930 300 z" fill="#4D90DE"/>
    // </svg>`;
    var path = `
    <svg width="930" height="600" xmlns="http://www.w3.org/2000/svg">
        <path d="`
        + path.getAttribute('d') + '"  stroke="red"  stroke-width="3" fill="none"/></svg>';

    let parser = new DOMParser();
    console.log(path);
    let svg = parser.parseFromString(path, "image/svg+xml");
    return svg;
};

LevelData.buildGround = function (scene, yOffset) {
    var positions = LevelData.getplatformData();
    
    var prevPoints = {x: 0, y: 0};
    var ground = scene.matter.add.image(0, positions[0], 'ground', null, { restitution: 0.4, isStatic: true, label: "Ground" });
    ground.setDisplaySize(20, 10);
    prevPoints.y = positions[0];

    // getAngle()
    
    for ( var i = 0 ; i < positions.length ; i+=10){
        var ground = scene.matter.add.image(positions[i].x, positions[i].y+yOffset, 'ground', null, { ignoreGravity:true, restitution: 0.4, isStatic: true, label: "Ground" });
        ground.setCircle(20);
        ground.setIgnoreGravity(true);        
        ground.setDisplaySize(30, 20);
        ground.setVisible(false);
        ground.setStatic(true);

       
    }

    function getAngle(prevX, currentX, prevY, currentY)
    {
     return Math.atan2(currentY - prevY, currentX - prevX) * 180 / Math.PI;
    }

   
};